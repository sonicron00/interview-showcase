"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[773],{7288:(t,i,e)=>{i.X=!0;var n=e(655),c=e(629),a=e(8425);i.Z={name:"products",props:["canEdit","canApply"],components:{PageBanner:a.default},data:function(){return{newProductDescription:"",newProductQty:0,calculatedPrice:0,requestedQuantity:0,invalidQty:!1,insufficientQty:!1,editMode:!1,showBanner:!0,headers:[{text:"ID",value:"productID",sortable:!0},{text:"Description",value:"description"},{text:"Quantity (Units)",value:"quantity",sortable:!0},{text:"",value:"actions"},{text:"",value:"apply"}]}},computed:n.__assign(n.__assign({},c.mapGetters("products",{products:"getProducts",isLoading:"isLoading"})),{actionButtons:function(){return this.editMode?["Cancel"]:["Add New Product"]}}),mounted:function(){this.loadProducts()},methods:n.__assign(n.__assign(n.__assign({},c.mapActions("products",["loadProducts","createOrUpdateProduct","calcPriceForQuantity","commitApplication"])),c.mapMutations("products",["editProduct","clearEdit"])),{actionClick:function(t){"Add New Product"===t&&this.addRowHandler(),"Cancel"===t&&this.cancelAdd()},editRowHandler:function(t,i,e){if(i)return this.createOrUpdateProduct({description:this.newProductDescription,productID:t}),void(this.newProductDescription="");this.newProductDescription=e,this.editProduct(t)},cancelEditRow:function(t){this.newProductDescription="",this.requestedQuantity=0,this.editProduct(t)},cancelAdd:function(){this.editMode=!1},inputHandler:function(t,i,e){this.products[i][e]=t,this.$set(this.products,i,this.products[i]),this.$emit("input",this.products)},addRowHandler:function(){this.editMode=!0},saveProduct:function(){this.createOrUpdateProduct({productID:0,description:this.newProductDescription,qty:this.newProductQty}),this.newProductDescription="",this.newProductQty=0,this.editMode=!1},getPriceForQuantity:function(t,i){this.invalidQty=!1,this.insufficientQty=!1,this.requestedQuantity<=0?this.invalidQty=!0:this.requestedQuantity>i?this.insufficientQty=!0:this.calcPriceForQuantity({productID:t,requestedQuantity:this.requestedQuantity})},applyQuantity:function(t){this.commitApplication({productID:t,quantity:this.requestedQuantity}),this.requestedQuantity=0}})}},4124:(t,i,e)=>{e.d(i,{Z:()=>a});var n=e(3645),c=e.n(n)()((function(t){return t[1]}));c.push([t.id,"#app[data-v-7104fdb1]{margin:60px;text-align:center}tbody[data-v-7104fdb1],td[data-v-7104fdb1],tfoot[data-v-7104fdb1],th[data-v-7104fdb1],thead[data-v-7104fdb1],tr[data-v-7104fdb1]{text-align:left;vertical-align:middle;width:100px}pre[data-v-7104fdb1]{color:#d63384;text-align:left}.tableInput[data-v-7104fdb1]{border-style:solid}",""]);const a=c},686:(t,i,e)=>{e.d(i,{Z:()=>a});var n=e(3645),c=e.n(n)()((function(t){return t[1]}));c.push([t.id,".jumbotron{background-color:#8c9eff;border-radius:12px}",""]);const a=c},4773:(t,i,e)=>{e.r(i),e.d(i,{__esModule:()=>n.X,default:()=>d});var n=e(7288);const c=n.Z;var a=e(3379),r=e.n(a),o=e(4124),s={insert:"head",singleton:!1};r()(o.Z,s);o.Z.locals;const d=(0,e(1900).Z)(c,(function(){var t=this,i=t._self._c;return i("v-container",[t.canEdit?i("PageBanner",{attrs:{title:"Inventory",subtitle:"Inventory product management",actions:t.actionButtons},on:{clickAction:t.actionClick}}):t._e(),t._v(" "),t.editMode?i("v-card",{staticClass:"mx-auto",attrs:{"max-width":"344",variant:"outlined"}},[i("v-card-text",[i("v-text-field",{attrs:{label:"Product description"},model:{value:t.newProductDescription,callback:function(i){t.newProductDescription=i},expression:"newProductDescription"}}),t._v(" "),i("v-text-field",{attrs:{label:"Opening quantity",type:"number"},model:{value:t.newProductQty,callback:function(i){t.newProductQty=i},expression:"newProductQty"}})],1),t._v(" "),i("v-card-actions",[i("v-btn",{attrs:{color:"#78be20",disabled:this.newProductDescription.length<4||this.newProductQty<=0,block:""},on:{click:function(i){return t.saveProduct()}}},[t._v("Save Product")])],1)],1):t._e(),t._v(" "),i("b-alert",{attrs:{show:this.invalidQty,variant:"warning"}},[i("p",[t._v("Quantity must be greater than zero")])]),t._v(" "),i("b-alert",{attrs:{show:this.insufficientQty,variant:"warning"}},[i("p",[t._v("Quantity to be applied exceeds the quantity on hand")])]),t._v(" "),t.products.length>1?i("v-data-table",{staticClass:"elevation-0",attrs:{headers:t.headers,items:t.products,loading:this.isLoading},scopedSlots:t._u([{key:"item.quantity",fn:function(i){var e=i.item;return[t._v("\n      "+t._s(e.quantity.toLocaleString("en-US"))+"\n    ")]}},this.canEdit?{key:"item.description",fn:function(e){var n=e.item;return[n.isEdit?i("v-text-field",{attrs:{type:"text"},model:{value:t.newProductDescription,callback:function(i){t.newProductDescription=i},expression:"newProductDescription"}}):i("span",[t._v(t._s(n.description))])]}}:null,this.canEdit?{key:"item.actions",fn:function(e){var n=e.item;return[n.isEdit?t._e():i("v-btn",{on:{click:function(i){var e;return t.editRowHandler(n.productID,null!==(e=n.isEdit)&&void 0!==e&&e,n.description)}}},[t._v("Edit")]),t._v(" "),n.isEdit?i("v-btn",{attrs:{color:"#78be20"},on:{click:function(i){var e;return t.editRowHandler(n.productID,null!==(e=n.isEdit)&&void 0!==e&&e,n.description)}}},[t._v("Save Changes")]):t._e(),t._v(" "),n.isEdit?i("v-btn",{on:{click:function(i){return t.cancelEditRow(n.productID)}}},[t._v("Cancel")]):t._e()]}}:null,this.canApply?{key:"item.apply",fn:function(e){var n=e.item;return[!n.isEdit&&n.quantity>0?i("v-btn",{on:{click:function(i){var e;return t.editRowHandler(n.productID,null!==(e=n.isEdit)&&void 0!==e&&e)}}},[t._v("Apply")]):t._e(),t._v(" "),n.isEdit?i("v-text-field",{attrs:{type:"number"},model:{value:t.requestedQuantity,callback:function(i){t.requestedQuantity=i},expression:"requestedQuantity"}}):t._e(),t._v(" "),!n.isEdit||0!=n.calculatedPrice&&n.calculatedPrice?t._e():i("v-btn",{on:{click:function(i){return t.getPriceForQuantity(n.productID,n.quantity)}}},[t._v("Calculate")]),t._v(" "),n.calculatedPrice>0?i("v-card",{staticClass:"mx-auto",attrs:{"max-width":"344",variant:"outlined"}},[i("v-card-text",[i("div",[i("div",{staticClass:"text-overline mb-1"},[t._v("Application Value")]),t._v(" "),i("div",{staticClass:"text-h6 mb-1"},[t._v("NZD$ "+t._s(n.calculatedPrice.toLocaleString("en-US")))])])]),t._v(" "),i("v-card-actions",[i("v-btn",{attrs:{color:"#78be20"},on:{click:function(i){return t.applyQuantity(n.productID)}}},[t._v("Confirm Application")]),t._v(" "),n.isEdit?i("v-btn",{on:{click:function(i){return t.cancelEditRow(n.productID)}}},[t._v("Cancel")]):t._e()],1)],1):t._e()]}}:null],null,!0)}):t._e()],1)}),[],!1,null,"7104fdb1",null).exports},8425:(t,i,e)=>{e.r(i),e.d(i,{default:()=>s});const n={name:"Welcome.vue",props:{title:String,subtitle:String,actions:[]},methods:{click:function(t){this.$emit("clickAction",t)}}};var c=e(3379),a=e.n(c),r=e(686),o={insert:"head",singleton:!1};a()(r.Z,o);r.Z.locals;const s=(0,e(1900).Z)(n,(function(){var t=this,i=t._self._c;return i("v-container",[i("div",{staticClass:"col-12 text-center"},[i("b-jumbotron",{scopedSlots:t._u([{key:"header",fn:function(){return[t._v(t._s(t.title))]},proxy:!0},{key:"lead",fn:function(){return[t._v("\n        "+t._s(t.subtitle)+"\n      ")]},proxy:!0}])},[t._v(" "),t._v(" "),t.actions?i("hr",{staticClass:"my-4"}):t._e(),t._v(" "),t._l(t.actions,(function(e){return i("v-list-item-action",{key:e},[i("v-btn",{on:{click:function(i){return t.click(e)}}},[t._v(t._s(e))])],1)}))],2)],1)])}),[],!1,null,null,null).exports}}]);