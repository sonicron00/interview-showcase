"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[743,773],{7288:(t,e,i)=>{e.X=!0;var n=i(655),a=i(629),c=i(8425);e.Z={name:"products",props:["canEdit","canApply"],components:{PageBanner:c.default},data:function(){return{newProductDescription:"",newProductQty:0,calculatedPrice:0,requestedQuantity:0,invalidQty:!1,insufficientQty:!1,editMode:!1,showBanner:!0,headers:[{text:"ID",value:"productID",sortable:!0},{text:"Description",value:"description"},{text:"Quantity (Units)",value:"quantity",sortable:!0},{text:"",value:"actions"},{text:"",value:"apply"}]}},computed:n.__assign(n.__assign({},a.mapGetters("products",{products:"getProducts",isLoading:"isLoading"})),{actionButtons:function(){return this.editMode?["Cancel"]:["Add New Product"]}}),mounted:function(){this.loadProducts()},methods:n.__assign(n.__assign(n.__assign({},a.mapActions("products",["loadProducts","createOrUpdateProduct","calcPriceForQuantity","commitApplication"])),a.mapMutations("products",["editProduct","clearEdit"])),{actionClick:function(t){"Add New Product"===t&&this.addRowHandler(),"Cancel"===t&&this.cancelAdd()},editRowHandler:function(t,e,i){if(e)return this.createOrUpdateProduct({description:this.newProductDescription,productID:t}),void(this.newProductDescription="");this.newProductDescription=i,this.editProduct(t)},cancelEditRow:function(t){this.newProductDescription="",this.requestedQuantity=0,this.editProduct(t)},cancelAdd:function(){this.editMode=!1},inputHandler:function(t,e,i){this.products[e][i]=t,this.$set(this.products,e,this.products[e]),this.$emit("input",this.products)},addRowHandler:function(){this.editMode=!0},saveProduct:function(){this.createOrUpdateProduct({productID:0,description:this.newProductDescription,qty:this.newProductQty}),this.newProductDescription="",this.newProductQty=0,this.editMode=!1},getPriceForQuantity:function(t,e){this.invalidQty=!1,this.insufficientQty=!1,this.requestedQuantity<=0?this.invalidQty=!0:this.requestedQuantity>e?this.insufficientQty=!0:this.calcPriceForQuantity({productID:t,requestedQuantity:this.requestedQuantity})},applyQuantity:function(t){this.commitApplication({productID:t,quantity:this.requestedQuantity}),this.requestedQuantity=0}})}},4124:(t,e,i)=>{i.d(e,{Z:()=>c});var n=i(3645),a=i.n(n)()((function(t){return t[1]}));a.push([t.id,"#app[data-v-7104fdb1]{margin:60px;text-align:center}tbody[data-v-7104fdb1],td[data-v-7104fdb1],tfoot[data-v-7104fdb1],th[data-v-7104fdb1],thead[data-v-7104fdb1],tr[data-v-7104fdb1]{text-align:left;vertical-align:middle;width:100px}pre[data-v-7104fdb1]{color:#d63384;text-align:left}.tableInput[data-v-7104fdb1]{border-style:solid}",""]);const c=a},686:(t,e,i)=>{i.d(e,{Z:()=>c});var n=i(3645),a=i.n(n)()((function(t){return t[1]}));a.push([t.id,".jumbotron{background-color:#8c9eff;border-radius:12px}",""]);const c=a},4773:(t,e,i)=>{i.r(e),i.d(e,{__esModule:()=>n.X,default:()=>d});var n=i(7288);const a=n.Z;var c=i(3379),r=i.n(c),o=i(4124),s={insert:"head",singleton:!1};r()(o.Z,s);o.Z.locals;const d=(0,i(1900).Z)(a,(function(){var t=this,e=t._self._c;return e("v-container",[t.canEdit?e("PageBanner",{attrs:{title:"Inventory",subtitle:"Inventory product management",actions:t.actionButtons},on:{clickAction:t.actionClick}}):t._e(),t._v(" "),t.editMode?e("v-card",{staticClass:"mx-auto",attrs:{"max-width":"344",variant:"outlined"}},[e("v-card-text",[e("v-text-field",{attrs:{label:"Product description"},model:{value:t.newProductDescription,callback:function(e){t.newProductDescription=e},expression:"newProductDescription"}}),t._v(" "),e("v-text-field",{attrs:{label:"Opening quantity",type:"number"},model:{value:t.newProductQty,callback:function(e){t.newProductQty=e},expression:"newProductQty"}})],1),t._v(" "),e("v-card-actions",[e("v-btn",{attrs:{color:"#78be20",disabled:this.newProductDescription.length<4||this.newProductQty<=0,block:""},on:{click:function(e){return t.saveProduct()}}},[t._v("Save Product")])],1)],1):t._e(),t._v(" "),e("b-alert",{attrs:{show:this.invalidQty,variant:"warning"}},[e("p",[t._v("Quantity must be greater than zero")])]),t._v(" "),e("b-alert",{attrs:{show:this.insufficientQty,variant:"warning"}},[e("p",[t._v("Quantity to be applied exceeds the quantity on hand")])]),t._v(" "),t.products.length>1?e("v-data-table",{staticClass:"elevation-0",attrs:{headers:t.headers,items:t.products,loading:this.isLoading},scopedSlots:t._u([{key:"item.quantity",fn:function(e){var i=e.item;return[t._v("\n      "+t._s(i.quantity.toLocaleString("en-US"))+"\n    ")]}},this.canEdit?{key:"item.description",fn:function(i){var n=i.item;return[n.isEdit?e("v-text-field",{attrs:{type:"text"},model:{value:t.newProductDescription,callback:function(e){t.newProductDescription=e},expression:"newProductDescription"}}):e("span",[t._v(t._s(n.description))])]}}:null,this.canEdit?{key:"item.actions",fn:function(i){var n=i.item;return[n.isEdit?t._e():e("v-btn",{on:{click:function(e){var i;return t.editRowHandler(n.productID,null!==(i=n.isEdit)&&void 0!==i&&i,n.description)}}},[t._v("Edit")]),t._v(" "),n.isEdit?e("v-btn",{attrs:{color:"#78be20"},on:{click:function(e){var i;return t.editRowHandler(n.productID,null!==(i=n.isEdit)&&void 0!==i&&i,n.description)}}},[t._v("Save Changes")]):t._e(),t._v(" "),n.isEdit?e("v-btn",{on:{click:function(e){return t.cancelEditRow(n.productID)}}},[t._v("Cancel")]):t._e()]}}:null,this.canApply?{key:"item.apply",fn:function(i){var n=i.item;return[!n.isEdit&&n.quantity>0?e("v-btn",{on:{click:function(e){var i;return t.editRowHandler(n.productID,null!==(i=n.isEdit)&&void 0!==i&&i)}}},[t._v("Apply")]):t._e(),t._v(" "),n.isEdit?e("v-text-field",{attrs:{type:"number"},model:{value:t.requestedQuantity,callback:function(e){t.requestedQuantity=e},expression:"requestedQuantity"}}):t._e(),t._v(" "),!n.isEdit||0!=n.calculatedPrice&&n.calculatedPrice?t._e():e("v-btn",{on:{click:function(e){return t.getPriceForQuantity(n.productID,n.quantity)}}},[t._v("Calculate")]),t._v(" "),n.calculatedPrice>0?e("v-card",{staticClass:"mx-auto",attrs:{"max-width":"344",variant:"outlined"}},[e("v-card-text",[e("div",[e("div",{staticClass:"text-overline mb-1"},[t._v("Application Value")]),t._v(" "),e("div",{staticClass:"text-h6 mb-1"},[t._v("NZD$ "+t._s(n.calculatedPrice.toLocaleString("en-US")))])])]),t._v(" "),e("v-card-actions",[e("v-btn",{attrs:{color:"#78be20"},on:{click:function(e){return t.applyQuantity(n.productID)}}},[t._v("Confirm Application")]),t._v(" "),n.isEdit?e("v-btn",{on:{click:function(e){return t.cancelEditRow(n.productID)}}},[t._v("Cancel")]):t._e()],1)],1):t._e()]}}:null],null,!0)}):t._e()],1)}),[],!1,null,"7104fdb1",null).exports},8425:(t,e,i)=>{i.r(e),i.d(e,{default:()=>s});const n={name:"Welcome.vue",props:{title:String,subtitle:String,actions:[]},methods:{click:function(t){this.$emit("clickAction",t)}}};var a=i(3379),c=i.n(a),r=i(686),o={insert:"head",singleton:!1};c()(r.Z,o);r.Z.locals;const s=(0,i(1900).Z)(n,(function(){var t=this,e=t._self._c;return e("v-container",[e("div",{staticClass:"col-12 text-center"},[e("b-jumbotron",{scopedSlots:t._u([{key:"header",fn:function(){return[t._v(t._s(t.title))]},proxy:!0},{key:"lead",fn:function(){return[t._v("\n        "+t._s(t.subtitle)+"\n      ")]},proxy:!0}])},[t._v(" "),t._v(" "),t.actions?e("hr",{staticClass:"my-4"}):t._e(),t._v(" "),t._l(t.actions,(function(i){return e("v-list-item-action",{key:i},[e("v-btn",{on:{click:function(e){return t.click(i)}}},[t._v(t._s(i))])],1)}))],2)],1)])}),[],!1,null,null,null).exports},743:(t,e,i)=>{i.r(e),i.d(e,{default:()=>r});var n=i(4773),a=i(8425);const c={name:"Welcome.vue",components:{Products:n.default,PageBanner:a.default}};const r=(0,i(1900).Z)(c,(function(){var t=this._self._c;return t("v-container",[t("PageBanner",{attrs:{title:"Product Availability",subtitle:"Application Calculator"}}),this._v(" "),t("Products",{attrs:{"can-apply":!0,"can-edit":!1}})],1)}),[],!1,null,null,null).exports}}]);